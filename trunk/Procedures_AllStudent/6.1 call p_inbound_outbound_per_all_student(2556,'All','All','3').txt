CREATE PROCEDURE p_inbound_outbound_per_all_student(IN paramYEAR INTEGER,IN paramFAC VARCHAR(256),IN paramDEP VARCHAR(256),IN paramYEARSUB VARCHAR(256)) 
DYNAMIC RESULT SETS 1 
LANGUAGE SQL 
BEGIN 
    DECLARE result_set_1 CURSOR WITH RETURN TO CLIENT FOR
	
select INBOUND_OUTBOUND_STUDENT.ACADEMIC_YEAR
,INBOUND_OUTBOUND_STUDENT.TYPE
,sum(INBOUND_OUTBOUND_STUDENT.NO_OF_STUDENT) as TOTALSTUDENT
from INBOUND_OUTBOUND_STUDENT
where (INBOUND_OUTBOUND_STUDENT.ACADEMIC_YEAR between (paramYEAR)-(paramYEARSUB)+(1) and (paramYEAR))
and (INBOUND_OUTBOUND_STUDENT.FACULTY_CODE in (paramFAC) or 'All' in (paramFAC))
and (INBOUND_OUTBOUND_STUDENT.DEPARTMENT_CODE in (paramDEP) or 'All' in (paramDEP))
group by INBOUND_OUTBOUND_STUDENT.ACADEMIC_YEAR,INBOUND_OUTBOUND_STUDENT.TYPE
order by TYPE,ACADEMIC_YEAR;
	
    OPEN result_set_1;
END